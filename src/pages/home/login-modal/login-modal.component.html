<div class="modal__container">

  <button mat-icon-button class="modal__close-btn" (click)="close()">
    <mat-icon>close</mat-icon>
  </button>

  <div class="modal__illustration">
    <img src="assets/login.svg" alt="Ilustração" class="modal__illustration-img"/>
  </div>

  <h2 class="modal__title">Login</h2>

  <form class="modal__form" [formGroup]="loginForm" (ngSubmit)="login()">
    <mat-form-field appearance="outline" class="modal__field">
      <mat-label>Email</mat-label>
      <input matInput type="email" placeholder="Digite seu email" formControlName="email"
             (input)="clearLoginError()" (focus)="clearLoginError()">
      <mat-error *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
        {{ getErrorMessage('email') }}
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="modal__field">
      <mat-label>Senha</mat-label>
      <input matInput type="password" placeholder="Digite sua senha" formControlName="password"
             (input)="clearLoginError()" (focus)="clearLoginError()">
      <mat-error *ngIf="loginForm.get('password')?.invalid && (loginForm.get('password')?.touched || loginForm.get('password')?.hasError('loginError'))">
        {{ getErrorMessage('password') }}
      </mat-error>
    </mat-form-field>

    <div class="modal__actions">
      <button mat-flat-button color="warn" class="modal__button" type="submit" [disabled]="isButtonDisabled">
        <span *ngIf="!isLoading">Acessar</span>
        <span *ngIf="isLoading" class="modal__button-loading">
          Entrando...
          <mat-spinner diameter="16" class="modal__button-spinner"></mat-spinner>
        </span>
      </button>
    </div>
  </form>

</div>
